var fjs=function(){var exports={};var add,apply,applyWith,and,areArguments,arity,arity0,arity1,arity2,arity3,assoc,attrs,bind,butfirst,butlast,call,callWith,clone,comp,complement,concat,concatMap,conj,cons,cs,curriedFunctions,curry,curry1,cycle,dec,del,dir,dir1,div,doc,drop,dropWhile,eq,eq2,eq3,eqOne,eqZero,error,error1,even,every,fdrop,fget,filter,first,flatten,flip,fmap,fmapkv,fn,freduce,freducekv,freduceR,get,gt,gte,id,inc,interleave,interpose,is,isa,isArray,isArrayLike,isBoolean,isEmpty,isFalse,isFloat,isFunction,isInt,isNull,isNumber,isObject,isString,isTrue,isUndefined,join,juxt,keys,last,len,log,log1,lookup,loop,lt,lte,map,mapkv,marshal,max,merge,min,mul,neq2,not,neq3,odd,or,owns,partial,pow,product,rand,randIndex,randInt,range,reduce,reducekv,reduceR,repeat,repeatedly,reverse,second,shuffle,slice,some,sort,source,sqrt,sub,sum,takeWhile,thread,time,times,unmarshal,use,useAll,values,version,warn,warn1,xor,xrange,zip;function NotImplementedError(message){this.name="NotImplementedError";this.message=message||""}NotImplementedError.prototype=new Error;exports.NotImplementedError=NotImplementedError;function ArgumentError(message){this.name="ArgumentError";this.message=message||""}ArgumentError.prototype=new Error;exports.ArgumentError=ArgumentError;exports.fn=fn=function fn(){var f=arguments[arguments.length-1];if(typeof f!=="function")throw new ArgumentError("Last argument of fn must be a function");f.doc=[].slice.call(arguments,0,-1).join("\n");return f};exports.loop=loop=function loop(f,xs){for(var i in xs)if(xs.hasOwnProperty(i))f.call(null,i,xs[i])};exports.is=is=function is(type){return function(x){return{}.toString.call(x).slice(8,-1)===type}};exports.isa=isa=function isa(obj){var fs=butfirst(arguments);for(i in fs)if(fs.hasOwnProperty(i)&&!(obj instanceof fs[i]))return false;return true};exports.owns=owns=function owns(xs,prop){return xs.hasOwnProperty(prop)};exports.not=not=function not(bool){return!bool};exports.eq2=eq2=function eq2(){var args=arguments;var reducer=function(x,y,rest){if(rest.length==1)return x==y;return x==y&&reducer(rest[0],rest[1],slice(rest,1))};return reducer(args[0],args[1],slice(args,1))};exports.eq3=eq3=function eq3(){var args=arguments;var reducer=function(x,y,rest){if(rest.length==1)return x===y;return x===y&&reducer(rest[0],rest[1],slice(rest,1))};return reducer(args[0],args[1],slice(args,1))};exports.neq2=neq2=function neq2(){var args=arguments;var reducer=function(x,y,rest){if(rest.length==1)return x!=y;return x!=y||reducer(rest[0],rest[1],slice(rest,1))};return reducer(args[0],args[1],slice(args,1))};exports.neq3=neq3=function neq3(){var args=arguments;var reducer=function(x,y,rest){if(rest.length==1)return x!==y;return x!==y||reducer(rest[0],rest[1],slice(rest,1))};return reducer(args[0],args[1],slice(args,1))};exports.lt=lt=function lt(){var args=arguments;var reducer=function(x,y,rest){if(rest.length==1)return x<y;return x<y&&reducer(rest[0],rest[1],slice(rest,1))};return reducer(args[0],args[1],slice(args,1))};exports.gt=gt=function gt(){var args=arguments;var reducer=function(x,y,rest){if(rest.length==1)return x>y;return x>y&&reducer(rest[0],rest[1],slice(rest,1))};return reducer(args[0],args[1],slice(args,1))};exports.lte=lte=function lte(){var args=arguments;var reducer=function(x,y,rest){if(rest.length==1)return x<=y;return x<=y&&reducer(rest[0],rest[1],slice(rest,1))};return reducer(args[0],args[1],slice(args,1))};exports.gte=gte=function gte(){var args=arguments;var reducer=function(x,y,rest){if(rest.length==1)return x>=y;return x>=y&&reducer(rest[0],rest[1],slice(rest,1))};return reducer(args[0],args[1],slice(args,1))};exports.and=and=function and(){var args=arguments;var reducer=function(x,y,rest){if(rest.length==1)return x&&y;return x&&y&&reducer(rest[0],rest[1],slice(rest,1))};return reducer(args[0],args[1],slice(args,1))};exports.or=or=function or(){var args=arguments;var reducer=function(x,y,rest){if(rest.length==1)return x||y;return x||y||reducer(rest[0],rest[1],slice(rest,1))};return reducer(args[0],args[1],slice(args,1))};exports.xor=xor=function xor(){var args=arguments;var reducer=function(x,y,rest){if(rest.length==1)return!x!==!y&&(x||y);var val1=!x!==!y&&(x||y);var val2=reducer(rest[0],rest[1],slice(rest,1));return!val1!==!val2&&(val1||val2)};return reducer(args[0],args[1],slice(args,1))};exports.complement=complement=function complement(f){return function(){return!apply(f,arguments)}};exports.applyWith=applyWith=function applyWith(f,cxt,args){if(!isArrayLike(args))throw new ArgumentError("args must be an array or some arguments");return f.apply(cxt,args)};exports.callWith=callWith=function callWith(f,cxt){return applyWith(f,cxt,slice(arguments,2))};exports.bind=bind=function bind(f,ctx){return partial(callWith,f,ctx)};exports.arity=arity=function arity(n){return function(f){return function(){return apply(f,slice(arguments,0,n))}}};exports.arity0=arity0=arity(0);exports.arity1=arity1=arity(1);exports.arity2=arity2=arity(2);exports.arity3=arity3=arity(3);exports.cs=cs=function cs(met){return function(){var args=arguments.length<2?first(arguments):slice(arguments);console[met](args);return args}};exports.id=id=function id(x){return x};exports.clone=clone=function clone(x){if(this.JSON)return JSON.parse(JSON.stringify(x));var cloneArray=function(xs){return map(clone,xs)};var cloneObject=function(xs){var y={};for(i in xs)y[clone(i)]=clone(xs[i]);return y};switch(true){case isArrayLike(x):return cloneArray(x);case isObject(x):return cloneObject(x);default:return x}};exports.doc=doc=function doc(obj){return obj.doc};exports.len=len=function len(obj){return obj.length};exports.attrs=attrs=function attrs(obj){var attrsObj={};for(var i in obj)attrsObj[i]=obj[i];return attrsObj};exports.apply=apply=function apply(f,args){if(!isArrayLike(args))throw new ArgumentError("args must be an array or some arguments");return applyWith(f,void 8,args)};exports.call=call=function call(f){return apply(f,butfirst(arguments))};exports.comp=comp=function comp(){return reduce(function(f,g){return function(){return call(f,apply(g,arguments))}},arguments)};exports.slice=slice=function slice(xs){var args=[].slice.call(arguments).slice(1);if([].slice)return applyWith([].slice,xs,args);throw new NotImplementedError('function "slice" is not implemented yet')};exports.join=join=function join(xs){var sep=second(arguments)||"";if([].join)return callWith([].join,xs,sep);var s="";loop(function(i,x){s+=x;if(xs.length-1!==parseInt(i))s+=sep},xs);return s};exports.concat=concat=function concat(){var xs=[];for(var i in arguments)for(var j in arguments[i])xs.push(arguments[i][j]);return xs};exports.map=map=function map(f,xs){if([].map)return callWith([].map,xs,arity1(f));var ret=[];loop(function(i,x){ret.push(call(f,x))},xs);return ret};exports.mapkv=mapkv=function mapkv(f,obj){var ret=[];loop(function(k,v){ret.push(f.call(f,isArrayLike(obj)?parseInt(k):k,v))},obj);return ret};exports.concatMap=concatMap=function concatMap(f,xs){return apply(concat,map(f,xs))};exports.filter=filter=function filter(pred,xs){if([].filter)return callWith([].filter,xs,arity1(pred));var ys=[];loop(function(_,x){if(pred(x))ys.push(x)},xs);return ys};exports.sort=sort=function sort(comp,xs){if(isUndefined(xs)){xs=comp;comp=void 8}if([].sort)return callWith([].sort,xs,comp);throw new NotImplementedError('function "sort" is not implemented yet')};exports.shuffle=shuffle=function shuffle(xs){var ys=Array(xs.length);for(i in xs){var r=randInt(i);ys[i]=ys[r];ys[r]=xs[i]}return ys};exports.zip=zip=function zip(){var ret=[],args=arguments,len=apply(min,map(exports.len,args));if(args.length==1)return first(args);for(var i=0;i<len;i++){ret.push(map(exports.cfget(i),args))}return ret};exports.flatten=flatten=function flatten(xs){return reduce(function(acc,value){return concat(acc,isArrayLike(value)?flatten(value):[value])},xs,[])};exports.min=min=function min(){return reduce(Math.min,arguments)};exports.max=max=function max(){return reduce(Math.max,arguments)};exports.rand=rand=function rand(){var n=first(arguments)||1;return Math.random()*n};exports.randInt=randInt=function randInt(n){return parseInt(rand(n))};exports.randIndex=randIndex=function randIndex(xs){return xs[randInt(xs.length)]};exports.times=times=function times(n,f){while(n--)apply(f,slice(arguments,2))};exports.takeWhile=takeWhile=function takeWhile(pred,xs){for(var i=0;i<xs.length&&pred(xs[i]);i++);return slice(xs,0,i)};exports.dropWhile=dropWhile=function dropWhile(pred,xs){for(var i=0;i<xs.length&&pred(xs[i]);i++);return slice(xs,i)};exports.interpose=interpose=function interpose(sep,xs){var len=xs.length*2-1,ret=[];for(var i=0;i<len;i++)ret.push(odd(i)?sep:xs[i/2]);return ret};exports.interleave=interleave=function interleave(){return apply(comp(flatten,zip),arguments)};exports.keys=keys=function keys(obj){return mapkv(id,obj)};exports.values=values=function values(obj){return mapkv(flip(id),obj)};exports.merge=merge=function merge(){var merge2=function(obj1,obj2){var ret={};for(k in obj1)ret[k]=obj1[k];for(k in obj2)ret[k]=obj2[k];return ret};return reduce(merge2,arguments,{})};exports.assoc=assoc=function assoc(obj,k,v){var assocedObj=clone(obj);assocedObj[k]=v;return assocedObj};exports.marshal=marshal=function marshal(xs){return reduce(function(agg,x){agg[first(x)]=second(x);return agg},xs,{})};exports.unmarshal=unmarshal=function unmarshal(obj){return mapkv(function(k,v){return[k,v]},obj)};exports.cons=cons=function cons(xs,x){return concat([x],xs)};exports.conj=conj=function conj(xs){return concat(xs,butfirst(arguments))};exports.drop=drop=function drop(n,xs){return slice(xs,n)};exports.first=first=function first(xs){return xs[0]};exports.butfirst=butfirst=function butfirst(xs){return slice(xs,1)};exports.second=second=function second(xs){return xs[1]};exports.last=last=function last(xs){return xs[xs.length-1]};exports.butlast=butlast=function butlast(xs){return slice(xs,0,-1)};exports.get=get=function get(obj,i){return obj[i]};exports.lookup=lookup=function lookup(xs,ks,notFound){var found=isArrayLike(ks)?eqOne(ks.length)?xs[first(ks)]:lookup(xs[first(ks)],butfirst(ks)):xs[ks];return isUndefined(found)?notFound:found};exports.sum=sum=function sum(xs){return reduce(add,xs)};exports.product=product=function product(xs){return reduce(mul,xs)};exports.cycle=cycle=function cycle(n,xs){var ys=[];while(n--)applyWith([].push,ys,xs);return ys};exports.repeat=repeat=function repeat(n,x){if(n<1)return[];var xs=[];for(var i=0;i<n;i++)xs[i]=x;return xs};exports.repeatedly=repeatedly=function repeatedly(n,f){if(n<1)return[];var xs=[];for(var i=0;i<n;i++)xs[i]=f();return xs};exports.reduce=reduce=function reduce(f,xs,agg){if([].reduce){if(isUndefined(agg))return callWith([].reduce,xs,arity2(f));else return callWith([].reduce,xs,arity2(f),agg)}var reducer=function(ys,agg){if(isEmpty(ys))return agg;return reducer(butfirst(ys),call(f,agg,first(ys)))};if(isUndefined(agg))return reducer(butfirst(xs),first(xs));else return reducer(xs,agg)};exports.reducekv=reducekv=function reducekv(f,obj,agg){if([].reduce&&!isObject(obj))return callWith([].reduce,obj,arity3(f),agg);var reducer=function(obj,agg){if(isEmpty(obj))return agg;return reducer(butfirst(obj),call(f,agg,obj[0][0],obj[0][1]))};return reducer(unmarshal(obj),agg)};exports.reduceR=reduceR=function reduceR(f,xs,agg){if([].reduce){if(isUndefined(agg))return callWith([].reduceRight,xs,arity2(f));else return callWith([].reduceRight,xs,arity2(f),agg)}var reducer2=function(ys,agg){if(isEmpty(ys))return agg;return reducer2(butlast(ys),call(f,agg,last(ys)))};if(isUndefined(agg))return reducer2(butlast(xs),last(xs));else return reducer2(xs,agg)};exports.reverse=reverse=function reverse(xs){var ys=Array(xs.length),i=xs.length;while(i>0)ys[xs.length-i]=xs[--i];return ys};exports.every=every=function every(pred,xs){for(i in xs)if(xs.hasOwnProperty(i)&&!pred(xs[i]))return false;return true};exports.some=some=function some(pred,xs){for(i in xs)if(xs.hasOwnProperty(i))if(pred(xs[i]))return true;return false};exports.thread=thread=function thread(){return apply(flip(comp),butfirst(arguments))(first(arguments))};exports.partial=partial=function partial(f){var args=butfirst(arguments);return function(){return apply(f,concat(args,arguments))}};exports.curry=curry=function curry(f,arity){var curried=function(args,arity){return function(){if(arity-arguments.length>0)return curried(concat(args,arguments),arity-arguments.length);else return apply(f,concat(args,arguments))}};return curried([],or(arity,f.length))};exports.curry1=curry1=function curry1(f,arity){var curried1=function(args,arity){return function(arg){if(arity>1)return curried1(conj(args,arg),dec(arity));else return apply(f,conj(args,arg))}};return curried1([],or(arity,f.length))};exports.juxt=juxt=function juxt(){var fs=arguments;return function(){var args=arguments;return map(function(f){return apply(f,args)},fs)}};exports.flip=flip=function flip(f){return function(){return apply(f,reverse(arguments))}};exports.fdrop=fdrop=flip(drop);exports.fget=fget=flip(get);exports.fmap=fmap=flip(map);exports.fmapkv=fmapkv=flip(mapkv);exports.freduce=freduce=function freduce(xs,f,agg){return reduce(f,xs,agg)};exports.freducekv=freducekv=function freducekv(obj,f,agg){return reducekv(f,obj,agg)};exports.freduceR=freduceR=function freduceR(xs,f,agg){return reduceR(f,xs,agg)};exports.log=log=cs("log");exports.log1=log1=arity1(log);exports.dir=dir=cs("dir");exports.dir1=dir1=arity1(dir);exports.warn=warn=cs("warn");exports.warn1=warn1=arity1(warn);exports.error=error=cs("error");exports.error1=error1=arity1(error);exports.time=time=function time(f,fname){var label="#"+(f.name||fname||"unknown")+" #fjs-time-label-"+(new Date).getTime();var args=butfirst(arguments);console.time(label);var ret=apply(f,args);console.timeEnd(label);return ret};exports.range=range=function range(){var args=arguments;switch(args.length){case 1:return range(0,first(args),1);break;case 2:return range(first(args),second(args),1);break;case 3:var xs=[],min=args[0],max=args[1],step=args[2]>0?args[2]:1;if(min>=max)return[];do xs.push(min);while((min+=step)<max);return xs}};exports.xrange=xrange=function xrange(){var args=arguments;return function(){return apply(range,args)}};exports.eq=eq=function eq(x,y){var args=arguments;var eq2=function(x,y){switch(true){case isArrayLike(x)&&isArrayLike(y):if(x.length===y.length){for(var i=0;i<x.length;i++)if(!eq(x[i],y[i]))return false;return true}else return false;case isObject(x)&&isObject(y):if(eq(keys(x),keys(y))){for(i in x)if(!eq(x[i],y[i]))return false;return true}else return false;default:return x===y}};var reducer=function(x,y,rest){if(rest.length==1)return eq2(x,y);return eq2(x,y)&&reducer(rest[0],rest[1],slice(rest,1))};return reducer(args[0],args[1],slice(args,1))};exports.even=even=function even(x){return(x&1)===0};exports.odd=odd=complement(even);exports.inc=inc=function inc(x){return x+1};exports.dec=dec=function dec(x){return x-1};exports.eqZero=eqZero=function eqZero(x){return x===0};exports.eqOne=eqOne=function eqOne(x){return x===1};exports.isEmpty=isEmpty=function isEmpty(x){switch(true){case isArrayLike(x)||isString(x):return eqZero(x.length);case isObject(x):return isEmpty(keys(x));default:throw new ArgumentError("x must be an Array, a String or an Object")}};exports.isObject=isObject=function isObject(x){return is("Object")(x)&&!isFunction(x)};exports.isArray=isArray=is("Array");exports.isString=isString=is("String");exports.isFunction=isFunction=is("Function");exports.areArguments=areArguments=is("Arguments");exports.isArrayLike=isArrayLike=function isArrayLike(x){return isArray(x)||areArguments(x)};exports.isNumber=isNumber=is("Number");exports.isBoolean=isBoolean=is("Boolean");exports.isFloat=isFloat=function isFloat(x){return isNumber(x)&&parseFloat(x)!=parseInt(x)};exports.isInt=isInt=function isInt(x){return isNumber(x)&&!isFloat(x)};exports.isTrue=isTrue=function isTrue(x){return x===true};exports.isFalse=isFalse=function isFalse(x){return x===false};exports.isNull=isNull=function isNull(x){return x===null};exports.isUndefined=isUndefined=function isUndefined(x){return x===void 8};exports.add=add=function add(){return reduce(function(x,y){return x+y},arguments,0)};exports.mul=mul=function mul(){if(isEmpty(arguments))return 1;return reduce(function(x,y){return x*y},arguments)};exports.sub=sub=function sub(){if(isEmpty(arguments))return 0;return reduce(function(x,y){return x-y},arguments)};exports.div=div=function div(){if(isEmpty(arguments))return 1;return reduce(function(x,y){return x/y},arguments)};exports.pow=pow=function pow(x,y){if(Math.pow)return Math.pow(x,y);throw new NotImplementedError('function "pow" is not implemented yet')};exports.sqrt=sqrt=function sqrt(x){if(Math.sqrt)return Math.sqrt(x);throw new NotImplementedError('function "sqrt" is not implemented yet')};var parseArgs=function(args){return merge(apply(merge,filter(isObject,args)),marshal(map(partial(repeat,2),filter(isString,args))))};exports.use=function use(){loop(function(fjsname,parentname){if(exports.hasOwnProperty(fjsname)){if(this[parentname])warn('"'+parentname+'" has  been replaced by fjs.'+fjsname);this[parentname]=exports[fjsname]}else throw new Error('"'+fjsname+'" is not defined in fjs!')},parseArgs(isArrayLike(first(arguments))?first(arguments):arguments))};exports.useAll=function useAll(){apply(exports.use,filter(function(key){return key!="use"&&key!="useAll"&&key!="del"},keys(exports)))};exports.del=function del(){loop(function(_,parentname){delete this[parentname]},parseArgs(isArrayLike(first(arguments))?first(arguments):arguments))};(function(){var fs=["apply","applyWith","assoc","cons","cycle","drop","dropWhile","every","filter","get","loop","map","mapkv","pow","repeat","repeatedly","some","takeWhile"];loop(function(_,v){exports["c"+v]=curry(exports[v])},fs);var fs2={add:2,and:2,conj:2,div:2,eq:2,eq2:2,eq3:2,fdrop:2,fget:2,fmap:2,fmapkv:2,gt:2,gte:2,lt:2,lte:2,mul:2,neq2:2,neq3:2,or:2,sub:2,xor:2};loop(function(k,v){exports["c"+k]=curry(exports[k],v)},fs2);exports.curriedFunctions=sort(concat(fs,keys(fs2)))})();(function(){exports.version=function(){return join(values(exports.version.details),".")};exports.version.details={major:0,minor:16,patch:1}})();return exports}();this.fjs=fjs;if(this._===void 8){this._=this.fjs}delete fjs;